<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Microsoft Identity Python Web App: Index</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

</head>
<body>
    <h1>Microsoft Identity Python Web App</h1>
    <h2>Welcome {{ user.get("name") }}!</h2>

    <ul>
    {% if config.get("ENDPOINT") %}
      <li><a href='/call_downstream_api'>Call a downstream API</a></li>
    {% endif %}

    {% if config.get("ENDPOINT") %}
      <li><a href='/roles'>roles</a></li>
    {% endif %}

    {% if config.get("ENDPOINT") %}
      <li><a href='/users_with_roles'>User With roles</a></li>
    {% endif %}

    {% if config.get("B2C_PROFILE_AUTHORITY") %}
      <li><a href='{{config.get("B2C_PROFILE_AUTHORITY")}}?client_id={{config.get("CLIENT_ID")}}'>Edit Profile</a></li>
    {% endif %}

    <li><a href="/logout">Logout</a></li>
    </ul>


    <h3>Lookup User Roles</h3>
    <form id="userRoleForm">
      <label for="email">Enter User Email:</label>
      <input type="email" id="email" name="email" required placeholder="user@example.com">
      <button type="submit">Get Roles</button>
    </form>

<div id="result" class="result"></div>

<div id="assignRolesSection" style="display: none;">
  <h3>Assign Other Roles</h3>
  <form id="roleAssignmentForm">
      <label for="roleDropdown">Select Roles:</label>
      <select id="roleDropdown" name="roles" multiple required></select>
      <button type="button" onclick="assignRoles()">Assign Selected Roles</button>
  </form>
</div>

<script src="{{ url_for('static',filename='script.js') }}"> </script>


    <hr>
    <footer style="text-align: right">Powered by Identity Web {{ version }}</footer>
</body>
</html>

